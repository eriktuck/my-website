(()=>{document.addEventListener("DOMContentLoaded",()=>{let r=document.getElementById("theme-toggle"),o=document.querySelector(".theme-label"),n=window.matchMedia("(prefers-color-scheme: dark)"),m=localStorage.getItem("theme")||(n.matches?"dark":"light");document.documentElement.setAttribute("data-theme",m),m==="dark"?(r.checked=!0,o.textContent="Light Mode"):o.textContent="Dark Mode",r.addEventListener("click",()=>{let f=r.checked?"dark":"light";document.documentElement.setAttribute("data-theme",f),localStorage.setItem("theme",f),o.textContent=f==="dark"?"Light Mode":"Dark Mode";let s=document.createElement("div");s.className="theme-transition-overlay",document.body.appendChild(s),requestAnimationFrame(()=>{s.classList.add("active")}),setTimeout(()=>{s.classList.remove("active"),setTimeout(()=>s.remove(),500)},500)})});document.addEventListener("DOMContentLoaded",()=>{let r=document.querySelector(".hero-buttons .secondary-button");r&&r.addEventListener("click",o=>{o.preventDefault();let n=document.querySelector(".featured-projects");if(n){let f=document.querySelector(".fixed-header").offsetHeight+20,s=n.offsetTop-f;window.scrollTo({top:s,behavior:"smooth"})}})});document.addEventListener("DOMContentLoaded",()=>{let r=document.querySelector(".carousel-track"),o=document.querySelectorAll(".carousel-slide"),n=document.querySelector(".carousel-dots"),m=document.querySelector(".carousel-prev"),f=document.querySelector(".carousel-next"),s=[],c=0,g,i=l(),e=p();S(),L(),E(),x();function l(){return window.innerWidth<768?1:window.innerWidth<1200?2:3}function p(){return Math.max(1,o.length-i+1)}function S(){if(n){n.innerHTML="",s=[],e=p();for(let d=0;d<e;d++){let h=document.createElement("button");h.className="carousel-dot",h.setAttribute("aria-label",`Go to slide ${d+1}`),h.dataset.slide=d,n.appendChild(h),s.push(h)}k()}}function k(){s.length&&(s.forEach((d,h)=>{d.classList.toggle("active",h===c),d.setAttribute("aria-current",h===c?"true":"false")}),m.disabled=c===0,f.disabled=c>=e-1)}function L(){if(!document.querySelector(".carousel-slide"))return;i=l();let h=100/i,b=-c*h;r.style.transform=`translateX(${b}%)`,k(),o.forEach((w,T)=>{let z=T>=c&&T<c+i;w.setAttribute("aria-hidden",!z),w.setAttribute("tabindex",z?"0":"-1")}),o.forEach((w,T)=>{let z=T>=c&&T<c+i;w.setAttribute("aria-hidden",!z),w.setAttribute("tabindex",z?"0":"-1")}),k()}function t(){c>0&&(c--,L())}function a(){c<e-1&&(c++,L())}function y(d){c=d,L()}function v(d){Math.abs(d)>50&&(d<0?a():t())}function E(){m.addEventListener("click",t),f.addEventListener("click",a),document.addEventListener("keydown",b=>{b.key==="ArrowLeft"?t():b.key==="ArrowRight"&&a()}),n.addEventListener("click",b=>{let w=b.target.closest(".carousel-dot");w&&y(parseInt(w.dataset.slide))});let d=0;r.addEventListener("touchstart",b=>{d=b.touches[0].clientX},{passive:!0}),r.addEventListener("touchend",b=>{let w=b.changedTouches[0].clientX;v(w-d)},{passive:!0});let h;window.addEventListener("resize",()=>{clearTimeout(h),h=setTimeout(()=>{let b=l();b!==i&&(i=b,S(),L())},250)})}function x(){C(),g=setInterval(()=>{c<e-1?c++:c=0,L()},7e3)}function C(){clearInterval(g)}let u=document.querySelector(".carousel-container");u&&(u.addEventListener("mouseenter",C),u.addEventListener("mouseleave",x),u.addEventListener("focusin",C),u.addEventListener("focusout",x))});document.addEventListener("DOMContentLoaded",()=>{let r=new IntersectionObserver(o=>{o.forEach(n=>{n.isIntersecting&&(n.target.classList.add("animate-in"),r.unobserve(n.target))})},{threshold:.1,rootMargin:"50px"});document.querySelectorAll(".project-card, .section-header").forEach(o=>{r.observe(o)})});document.addEventListener("DOMContentLoaded",function(){console.log("DOM Content Loaded - Initializing particles...");let r=document.getElementById("particles-js");var o=document.documentElement.getAttribute("data-theme");console.log("Theme:",o);var n=o==="dark";if(!r){console.error("Particles container not found");return}if(typeof particlesJS!="function"){console.error("particlesJS function not found");return}function m(e){let l=e?"#ffffff":"#000000";return{particles:{number:{value:160,density:{enable:!0,value_area:800}},color:{value:l},shape:{type:"circle",stroke:{width:0,color:l},polygon:{nb_sides:5}},opacity:{value:1,random:!0,anim:{enable:!0,speed:1,opacity_min:0,sync:!1}},size:{value:3,random:!0,anim:{enable:!1,speed:4,size_min:.3,sync:!1}},line_linked:{enable:!1,distance:150,color:e?"#ffffff":"#000000",opacity:.4,width:1},move:{enable:!0,speed:1,direction:"none",random:!0,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:600}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!0,mode:"grab"},onclick:{enable:!0,mode:"bubble"},resize:!0},modes:{grab:{distance:110,line_linked:{opacity:1}},bubble:{distance:110,size:20,duration:2,opacity:0,speed:3},repulse:{distance:400,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0}}let f=null;function s(e){console.log(`Initializing particles for ${e?"dark":"light"} theme`),f&&(f.pJS.fn.vendors.destroypJS(),f=null);let l=m(e);f=particlesJS("particles-js",l)}s(n),new MutationObserver(e=>{e.forEach(l=>{if(l.attributeName==="data-theme"){let p=document.documentElement.getAttribute("data-theme");console.log(`Theme changed to: ${p}`),s(p==="dark")}})}).observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]});let g=document.getElementById("theme-toggle");g&&g.addEventListener("change",()=>{let e=g.checked?"dark":"light";console.log(`Theme toggle clicked: ${e}`),s(e==="dark")}),window.__setParticleTheme=e=>{let l=e?"dark":"light";document.documentElement.setAttribute("data-theme",l),s(e)},window.__reloadParticles=()=>{let e=document.documentElement.getAttribute("data-theme");s(e==="dark")};let i=document.querySelector("#particles-js canvas");console.log("Particles canvas:",i),i&&(i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%")});document.addEventListener("DOMContentLoaded",function(){let r=document.querySelector(".hamburger"),o=document.querySelector(".nav-menu");!r||!o||(r.addEventListener("click",function(n){o.classList.toggle("is-active"),o.classList.toggle("active");let m=o.classList.contains("is-active")||o.classList.contains("active");this.setAttribute("aria-expanded",m)}),document.addEventListener("click",function(n){window.innerWidth>768||!o.contains(n.target)&&!r.contains(n.target)&&(o.classList.remove("is-active"),r.setAttribute("aria-expanded","false"))}))});window.addEventListener("load",()=>{let r=document.getElementById("cy");if(!r)return;let o=document.querySelector(".expand-graph-btn"),n=document.querySelector(".modal-overlay"),m=n.querySelector(".modal-content"),f=document.querySelector("#cy-fullscreen"),s=m.querySelector(".close-modal"),c=document.querySelector(".hero-buttons .primary-button"),g=null,i=null,e=window.hugoData.cytoscapeData,l=JSON.parse(e);[o].forEach(p=>{p.addEventListener("click",()=>{n.style.display="flex",i?setTimeout(()=>{i.resize(),i.center()},100):(i=A({container:f,data:l,fullscreen:!0}),window.addEventListener("resize",()=>{i&&(i.resize(),i.center())}))})}),s.addEventListener("click",()=>{n.style.display="none"}),n.addEventListener("click",p=>{p.target===n&&(n.style.display="none")}),document.addEventListener("keydown",p=>{p.key==="Escape"&&n.style.display==="flex"&&(n.style.display="none")}),g=A({container:r,data:l,fullscreen:!1})});function A(r){let{container:o,data:n,fullscreen:m=!1}=r;n.elements&&n.elements.nodes&&n.elements.nodes.forEach(t=>{if(t.data&&t.data.label)try{let a=JSON.parse('"'+t.data.label.replace(/"/g,'\\"')+'"');t.data.label=a}catch{console.log("Error decoding label for node:",t.data.id)}});let f=[{selector:"node.highlighted",style:{"border-width":2,"border-color":"#482c73","font-weight":"bold",color:"#000000","text-background-opacity":.8,"text-background-padding":"2px","z-index":9999}},{selector:"node.faded",style:{opacity:.3,"z-index":1}},{selector:"edge.highlighted",style:{"line-color":"#349890",width:2,opacity:1,"z-index":9999}},{selector:"edge.faded",style:{opacity:.1,"z-index":1}}];function s(t){let a=t.find(y=>y.data.id==="\u{1F30E} home");return a||(a=t.find(y=>{let v=y.data.id||"",E=y.data.label||"";return v.includes("home")||E.includes("home")||v.includes("\u{1F30E}")||E.includes("\u{1F30E}")})),a}function c(t){let a=s(t.nodes);if(!a)return t;let y=a.data.id,v=new Set;v.add(y),t.edges.forEach(u=>{u.data.source===y?v.add(u.data.target):u.data.target===y&&v.add(u.data.source)});let E=new Set(v);t.edges.forEach(u=>{let d=u.data.source,h=u.data.target;v.has(d)?E.add(h):v.has(h)&&E.add(d)});let x=t.nodes.filter(u=>E.has(u.data.id)),C=t.edges.filter(u=>E.has(u.data.source)&&E.has(u.data.target));return{nodes:x,edges:C}}let g=1.5,i=m?n.elements:c(n.elements),e=cytoscape({container:o,elements:i,style:[{selector:"node",style:{label:"data(label)",color:"#333333","background-color":"#8752d7",width:15,height:15,"font-size":"10px","text-valign":"center","text-halign":"center","text-wrap":"wrap","text-max-width":"80px","transition-property":"background-color, border-color, line-color, opacity, width, height","transition-duration":"0.2s"}},{selector:"edge",style:{width:1,"line-color":"#999999","curve-style":"bezier",opacity:.6,"transition-property":"line-color, opacity, width","transition-duration":"0.2s"}},...f],userZoomingEnabled:!0,userPanningEnabled:!0,minZoom:.1,maxZoom:5,userZoom:g});e.on("zoom",function(){g=e.zoom()});let l={name:"cola",animate:!0,randomize:!0,fit:!1,padding:50,nodeSpacing:15,edgeLength:100,avoidOverlap:!0,maxSimulationTime:2e3,infinite:!0,constraints:[{type:"circle",position:{x:0,y:0},radius:100}],ready:function(){let t=s(e.nodes().toArray());if(t){let a=t.position();l.constraints[0].position={x:a.x,y:a.y}}e.zoom(g),t?e.center(t):e.center(),m?(e.fit(100),t?e.center(t):e.center()):(e.zoom(g),t?e.center(t):e.center())},tick:function(){}};e.layout(l).run(),m||setTimeout(()=>{e.zoom(g)},500),e.on("mouseover","node",function(t){t.target.style({width:20,height:20,"font-size":"12px","z-index":9999})}),e.on("mouseout","node",function(t){t.target.style({width:15,height:15,"font-size":"10px","z-index":999})}),e.on("dblclick","node",function(t){let y=t.target.data("url");y&&window.open(y,"_blank")}),e.on("tap",function(t){t.target===e&&S()}),e.on("tap","node",function(t){let a=t.target;p(a),t.stopPropagation()});function p(t){S();let a=t.neighborhood().add(t);e.elements().addClass("faded"),a.removeClass("faded"),a.addClass("highlighted"),e.nodes().lock(),setTimeout(()=>{e.nodes().unlock()},300)}function S(){e.elements().removeClass("highlighted faded")}let k=()=>{let a=document.documentElement.getAttribute("data-theme")==="dark";e.style().selector("node").style({color:a?"#e0e0e0":"#333333"}).selector("node.highlighted").style({color:a?"#ffffff":"#000000","text-background-color":a?"#404040":"#ffffff"}).update()};k(),new MutationObserver(t=>{t.forEach(a=>{a.attributeName==="data-theme"&&k()})}).observe(document.documentElement,{attributes:!0})}})();
